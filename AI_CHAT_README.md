# AI聊天助手使用说明

## 功能特点

✅ **OpenAI API集成** - 真实的AI对话，而非预设回复  
✅ **图片上传支持** - 支持上传图片进行多模态对话  
✅ **对话历史保存** - 跨页面保持对话上下文  
✅ **多模型支持** - GPT-4o, GPT-4o-mini, GPT-4-turbo, GPT-3.5-turbo  
✅ **全站可用** - 在所有文档页面都可以使用AI助手  

## 如何设置 API Key

### 方法1: 通过界面设置

1. 点击页面右下角的 **🤖 AI助手** 按钮
2. 点击聊天窗口右上角的 **⚙️** 设置按钮
3. 在弹出的对话框中输入你的OpenAI API Key
4. API Key会自动保存在浏览器本地存储中

### 方法2: 通过浏览器控制台设置

打开浏览器开发者工具（F12），在控制台中输入：

```javascript
localStorage.setItem('openai_api_key', '你的API Key');
```

### 获取 OpenAI API Key

1. 访问 [OpenAI Platform](https://platform.openai.com/)
2. 登录或注册账号
3. 进入 [API Keys页面](https://platform.openai.com/api-keys)
4. 点击 **Create new secret key** 创建新密钥
5. 复制密钥并保存（只显示一次）

## 使用功能

### 文字对话
- 在输入框中输入问题，按Enter或点击"发送"按钮
- 支持Shift+Enter换行
- AI会根据你的问题提供专业的ROS2解答

### 图片上传
1. 点击输入框左侧的 **📎** 按钮
2. 选择一张或多张图片
3. 图片会显示在输入框上方预览
4. 点击预览图右上角的 **×** 可以移除图片
5. 输入问题后发送，AI会分析图片内容

### 对话历史
- 所有对话会自动保存在浏览器本地存储
- 刷新页面或切换到其他文档页面，对话历史会自动恢复
- 点击 **🗑️** 按钮可以清除所有对话历史

### 模型选择
- 在右上角下拉菜单中选择不同的模型
- **GPT-4o**: 最新多模态模型，支持图片分析
- **GPT-4o-mini**: 性价比高的轻量版
- **GPT-4-turbo**: 强大的推理能力
- **GPT-3.5-turbo**: 快速响应，成本较低

## 窗口操作

- **拖拽移动**: 按住标题栏拖拽窗口到任意位置
- **最小化**: 点击 **-** 按钮最小化窗口
- **关闭**: 点击 **×** 按钮关闭窗口
- **重新打开**: 点击页面右下角的 **🤖 AI助手** 按钮

## 注意事项

⚠️ **API Key安全**
- API Key存储在浏览器本地，不会上传到服务器
- 请勿在公共电脑上使用私人API Key
- 定期更换API Key以保证安全

💰 **费用说明**
- 使用OpenAI API需要付费
- 不同模型费用不同，建议查看[OpenAI定价](https://openai.com/pricing)
- GPT-4o-mini是性价比最高的选择

🌐 **网络要求**
- 需要能够访问OpenAI API（可能需要代理）
- 上传的图片会被转换为base64编码发送

## 故障排除

### 问题: 提示"请先设置OpenAI API Key"
**解决**: 按照上面的步骤设置API Key

### 问题: 发送消息后没有响应
**解决**: 
1. 检查网络连接
2. 确认API Key是否正确
3. 检查浏览器控制台是否有错误信息
4. 确认OpenAI账户是否有余额

### 问题: 图片上传失败
**解决**:
1. 确保图片格式正确（JPG, PNG, GIF等）
2. 图片大小不要过大（建议<5MB）
3. 使用GPT-4o或GPT-4o-mini模型（支持图片）

### 问题: 对话历史丢失
**解决**:
1. 检查浏览器是否清除了缓存
2. 确认没有使用无痕模式
3. 手动导出重要对话内容

## 更新日志

### v2.0 (2024-01-13)
- ✨ 添加真实的OpenAI API集成
- ✨ 支持图片上传和多模态对话
- ✨ 对话历史跨页面保存
- ✨ 全站聊天窗口支持
- ✨ 多模型切换功能
- 🎨 优化界面和交互体验

### v1.0
- 基础聊天窗口功能
- 预设回复系统
